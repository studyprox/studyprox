<p>Welcome to StudyProx—your learning hub!</p>
import OpenAI from 'openai';

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

export default async function handler(req: any, res: any) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Only POST allowed' });
  }

  const { prompt } = req.body;
  if (!prompt) {
    return res.status(400).json({ error: 'Prompt required' });
  }

  try {
    const completion = await openai.chat.completions.create({
      model: 'gpt-4o-mini', // Start with mini for free/fast testing; swap to 'gpt-4o' later
      messages: [
        { role: 'system', content: 'You are a helpful tutor for Indian students (CBSE/Boards/JEE/NEET). Keep responses simple, accurate, and aimed at 95% scores. Include steps for math.' },
        { role: 'user', content: prompt }
      ],
      max_tokens: 500, // Limit for cost/speed
    });

    const response = completion.choices[0]?.message?.content || 'No response generated.';
    res.status(200).json({ response });
  } catch (error) {
    console.error('OpenAI Error:', error);
    res.status(500).json({ error: 'AI service temporarily down—try again!' });
  }
}
'use client'; // If Next.js 13+
import { useState } from 'react';

export default function AIChat() {
  const [messages, setMessages] = useState<{ role: 'user' | 'ai'; content: string }[]>([]);
  const [input, setInput] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!input.trim() || loading) return;

    const userMsg = { role: 'user' as const, content: input };
    setMessages(prev => [...prev, userMsg]);
    setInput(''); setLoading(true);

    try {
      const res = await fetch('/api/ai-query', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt: input }),
      });
      const { response } = await res.json();
      setMessages(prev => [...prev, { role: 'ai' as const, content: response }]);
    } catch (error) {
      setMessages(prev => [...prev, { role: 'ai' as const, content: 'Error connecting to AI—check console!' }]);
    }
    setLoading(false);
  };

  return (
    <div style={{ maxWidth: '600px', margin: '20px auto', border: '1px solid #ccc', borderRadius: '8px', padding: '16px' }}>
      <h2 style={{ textAlign: 'center' }}>StudyProx AI Tutor</h2>
      <div style={{ height: '300px', overflowY: 'auto', border: '1px solid #eee', padding: '8px', marginBottom: '10px' }}>
        {messages.map((msg, i) => (
          <div key={i} style={{ margin: '8px 0', padding: '8px', background: msg.role === 'user' ? '#e3f2fd' : '#f5f5f5', borderRadius: '4px' }}>
            <strong>{msg.role === 'user' ? 'You' : 'AI'}:</strong> {msg.content}
          </div>
        ))}
        {loading && <div>AI thinking... (uses GPT-4o for accurate answers!)</div>}
      </div>
      <form onSubmit={handleSubmit} style={{ display: 'flex' }}>
        <input
          type="text"
          value={input}
          onChange={e => setInput(e.target.value)}
          placeholder="e.g., Generate 5 NEET MCQs on Biology or Solve ∫x² dx"
          style={{ flex: 1, padding: '10px', border: '1px solid #ccc', borderRadius: '4px' }}
          disabled={loading}
        />
        <button type="submit" disabled={loading} style={{ padding: '10px 16px', marginLeft: '8px', background: '#0070f3', color: 'white', border: 'none', borderRadius: '4px' }}>
          {loading ? 'Sending...' : 'Ask AI'}
        </button>
      </form>
    </div>
  );
}
// learnhub-templates/InteractiveLesson.jsx
const InteractiveLesson = ({ lesson, aiEnabled = true }) => {
  return (
    <div className="lesson-container">
      <div className="lesson-content">
        <h1>{lesson.title}</h1>
        <div dangerouslySetInnerHTML={{ __html: lesson.content }} />
        
        {/* AI Integration Points */}
        {aiEnabled && (
          <>
            <AISummaryGenerator content={lesson.content} />
            <QuizGenerator topic={lesson.topic} />
            <AIFlashcardCreator content={lesson.content} />
          </>
        )}
      </div>
      
      <div className="lms-sidebar">
        <ProgressTracker />
        <DiscussionForum lessonId={lesson.id} />
        <RelatedResources />
      </div>
    </div>
  );
};
  // learnhub-templates/SmartAssessment.jsx
const SmartAssessment = ({ assessment }) => {
  const [userAnswers, setUserAnswers] = useState({});
  
  return (
    <div className="assessment-container">
      <h2>{assessment.title}</h2>
      
      {/* LMS Assessment Structure */}
      {assessment.questions.map((q, index) => (
        <QuestionItem 
          key={q.id}
          question={q}
          index={index}
          onChange={(answer) => handleAnswer(q.id, answer)}
        />
      ))}
      
      {/* AI-Powered Features */}
      <AITimeManagement questions={assessment.questions} />
      <AIHintSystem questions={assessment.questions} />
      <PerformanceAnalytics answers={userAnswers} />
    </div>
  );
};
   // services/IntegratedStudyService.js
class IntegratedStudyService {
  constructor() {
    this.aiService = new AIService();
    this.lmsService = new LMSService();
  }
  
  async getPersonalizedLearningPath(userId) {
    // Get LMS progress data
    const lmsProgress = await this.lmsService.getUserProgress(userId);
    
    // Get AI recommendations
    const aiRecommendations = await this.aiService.generateRecommendations(
      lmsProgress,
      userLearningStyle
    );
    
    // Combine for hybrid learning path
    return this.mergeLearningPaths(lmsProgress, aiRecommendations);
  }
  
  async generateSmartFlashcards(courseId) {
    // Get LMS course content
    const courseContent = await this.lmsService.getCourseContent(courseId);
    
    // Use AI to generate flashcards
    const flashcards = await this.aiService.generateFlashcards(courseContent);
    
    // Save to LMS
    await this.lmsService.saveStudyMaterial(courseId, 'flashcards', flashcards);
    
    return flashcards;
  }
}
  // pages/Dashboard.jsx
const UnifiedDashboard = () => {
  return (
    <div className="unified-dashboard">
      {/* LMS Side */}
      <div className="lms-section">
        <CourseProgress />
        <UpcomingAssignments />
        <GradeOverview />
      </div>
      
      {/* AI Study Side */}
      <div className="ai-section">
        <StudyRecommendations />
        <AIFlashcardReview />
        <SmartStudyPlanner />
      </div>
      
      {/* Combined Features */}
      <div className="hybrid-section">
        <AIPoweredCourseRecommendations />
        <LearningAnalyticsDashboard />
        <IntelligentReminders />
      </div>
    </div>
  );
};
       -- Add LMS tables to existing schema
CREATE TABLE courses (
  id UUID PRIMARY KEY,
  title VARCHAR(255),
  description TEXT,
  instructor_id UUID,
  created_at TIMESTAMP
);

CREATE TABLE enrollments (
  id UUID PRIMARY KEY,
  user_id UUID,
  course_id UUID,
  progress FLOAT,
  last_accessed TIMESTAMP
);

CREATE TABLE assignments (
  id UUID PRIMARY KEY,
  course_id UUID,
  title VARCHAR(255),
  due_date TIMESTAMP,
  ai_generated BOOLEAN DEFAULT false
);

-- Link AI features with LMS content
CREATE TABLE ai_study_sessions (
  id UUID PRIMARY KEY,
  user_id UUID,
  course_id UUID,
  content_type VARCHAR(50),
  ai_metrics JSONB,
  created_at TIMESTAMP
);
// api/integrated-routes.js
router.get('/api/hybrid/learning-path/:userId', async (req, res) => {
  const { userId } = req.params;
  
  // Get combined data
  const lmsData = await getLMSUserData(userId);
  const aiInsights = await getAILearningInsights(userId);
  
  // Generate hybrid response
  const hybridPath = {
    recommendedCourses: mergeRecommendations(
      lmsData.enrolledCourses,
      aiInsights.recommendedTopics
    ),
    studySchedule: generateSmartSchedule(
      lmsData.assignments,
      aiInsights.optimalStudyTimes
    ),
    resources: combineResources(
      lmsData.courseMaterials,
      aiInsights.generatedContent
    )
  };
  
  res.json(hybridPath);
});
          
